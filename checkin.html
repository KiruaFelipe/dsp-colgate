<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Leitor - Colgate Futuro Profissional</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#E2231A; --brand-dark:#B51C15;
      --ok:#16a34a; --err:#dc2626;
      --bg:#f7f7f8; --txt:#111827; --muted:#6b7280;
      --card:#ffffff; --stroke:#e5e7eb; --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui;
      background:var(--bg);
      color:var(--txt);
    }

    /* ----- HEADER ----- */
    header{
      background:var(--brand);
      color:#fff;
      padding:14px 20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:120px;height:32px;object-fit:contain}
    .code-pill{
      background:#fff;
      color:#111827;
      padding:6px 12px;
      border-radius:999px;
      font-weight:600;
    }

    /* ----- LAYOUT CENTRAL ----- */
    main{
      display:flex;
      justify-content:center;
      align-items:flex-start;
      gap:24px;
      flex-wrap:wrap;
      padding:40px 16px;
      min-height:calc(100vh - 120px);
    }

    .card{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:24px;
      box-shadow:0 4px 18px #0001;
      width:420px;
      max-width:90vw;
    }

    #infoCard, #cameraCard {
      width:420px;
    }

    @media(max-width:900px){
      main{flex-direction:column;align-items:center;}
      .card{width:90%;}
    }

    /* ----- COMPONENTES ----- */
    h2{margin:0 0 10px}
    .btn{
      background:var(--brand);
      color:#fff;
      border:0;
      padding:10px 16px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      transition:filter .15s;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn-ghost{
      background:#fff;
      color:var(--brand);
      border:1px solid var(--brand)
    }
    video{width:100%;border-radius:12px;background:#000}
    .status{margin-top:10px;font-size:14px}
    .ok{color:var(--ok)}
    .err{color:var(--err)}
    .event{display:flex;align-items:center;gap:12px;margin:6px 0 10px}
    .event .dot{width:10px;height:10px;border-radius:50%;background:var(--brand)}
    .muted{color:var(--muted)}

    /* -------- Modal -------- */
    .backdrop{position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; padding:16px; z-index:50;}
    .backdrop.show{display:flex; animation:fadeIn .15s ease}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .modal{width:min(520px, 96vw); background:#fff; color:var(--txt); border-radius:16px; border:1px solid var(--stroke);
      box-shadow:0 20px 60px rgba(0,0,0,.25); overflow:hidden; transform:translateY(6px); animation:pop .18s ease forwards;}
    @keyframes pop{to{transform:translateY(0)}}
    .modal-head{padding:14px 16px; background:#fff; border-bottom:1px solid var(--stroke); display:flex; align-items:center; justify-content:space-between; gap:8px;}
    .mh-title{font-weight:700}
    .modal-body{padding:16px}
    .modal-actions{padding:14px 16px; background:#fafafa; border-top:1px solid var(--stroke); display:flex; gap:10px; justify-content:flex-end;}
    .badge{padding:4px 8px; border-radius:999px; border:1px solid var(--stroke); color:#374151; font-size:12px;}
    .toast{position:fixed; bottom:18px; left:50%; transform:translateX(-50%); background:#0e9f6e; color:#fff; padding:10px 14px; border-radius:10px;
      box-shadow:0 10px 30px rgba(0,0,0,.25); font-weight:600; display:none; z-index:60;}
    .toast.show{display:block; animation:fadeIn .12s ease}
    .shake{animation:shake .25s}
    footer {
  padding: 22px 18px;
  text-align: center;
  color: var(--muted);
  font-size: 12px;
}
    @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-4px)}50%{transform:translateX(4px)}75%{transform:translateX(-3px)}100%{transform:translateX(0)}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="logo.jpg" alt="Logo" class="logo" onerror="this.style.display='none'">
      <strong>Leitor QR — Check-in</strong>
    </div>
    <div id="pill" class="code-pill">Código: —</div>
  </header>

  <main>
    <!-- Card com informações da palestra -->
    <section class="card" id="infoCard">
      <h2>Informações da palestra</h2>

      <div style="display:grid; gap:8px; margin-top:6px">
        <div><strong>Código:</strong> <span id="infoCodigo">Carregando…</span></div>
        <div><strong>Universidade:</strong> <span id="infoUni">Carregando…</span></div>
        <div><strong>Horário:</strong> <span id="infoHorario">Carregando…</span></div>
      </div>
    </section>


    <!-- Card da Câmera -->
    <section class="card" id="cameraCard">
      <h2>Câmera</h2>
      <p class="muted">Formato esperado do QR: <code>email|codigo</code>. O código deve coincidir com este check-in.</p>
      <video id="video" playsinline></video>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button id="start" class="btn">Iniciar</button>
        <button id="stop" class="btn-ghost" disabled>Parar</button>
      </div>
      <div id="status" class="status">Parado.</div>
    </section>
  </main>

  <!-- Modal -->
  <div id="backdrop" class="backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="mh-title" id="modalTitle">Confirmar presença</div>
        <span class="badge" id="modalBadge">Palestra: —</span>
      </div>
      <div class="modal-body">
        <div style="display:grid; gap:10px">
          <div><strong>E-mail:</strong> <span id="mEmail">—</span></div>
          <div><strong>Código:</strong> <span id="mCodigo">—</span></div>
          <div><strong>Detectado em:</strong> <span id="mTs">—</span></div>
        </div>
        <div id="modalInfo" class="muted" style="margin-top:8px;"></div>
      </div>
      <div class="modal-actions">
        <button id="btnCancelar" class="btn-ghost">Cancelar</button>
        <button id="btnConfirmar" class="btn">Confirmar presença</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

 <footer>© Colgate — Futuro Profissional</footer>

  <script src="https://unpkg.com/jsqr/dist/jsQR.js"></script>
  <script src="checkin.js"></script>
</body>
</html>
